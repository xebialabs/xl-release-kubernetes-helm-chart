"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[831],{614:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return m}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),l=["components"],o={sidebar_position:2},s="Make custom configuration for the Release",p={unversionedId:"make-custom-configuration",id:"make-custom-configuration",isDocsHomePage:!1,title:"Make custom configuration for the Release",description:"Requirements",source:"@site/docs/make-custom-configuration.md",sourceDirName:".",slug:"/make-custom-configuration",permalink:"/xl-release-kubernetes-helm-chart/docs/make-custom-configuration",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Building the operator image from helm chart",permalink:"/xl-release-kubernetes-helm-chart/docs/building-operator-image"}},c=[{value:"Requirements",id:"requirements",children:[],level:2},{value:"Steps",id:"steps",children:[],level:2}],u={toc:c};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"make-custom-configuration-for-the-release"},"Make custom configuration for the Release"),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Running Release installation on k8s cluster"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"kubectl")," connected to the cluster"),(0,i.kt)("li",{parentName:"ul"},"Release operator version above following:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"10.2.18"),(0,i.kt)("li",{parentName:"ul"},"10.3.16"),(0,i.kt)("li",{parentName:"ul"},"22.0.8"),(0,i.kt)("li",{parentName:"ul"},"22.1.6"),(0,i.kt)("li",{parentName:"ul"},"22.2.2")))),(0,i.kt)("h2",{id:"steps"},"Steps"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Download current template configuration file that exists on you Release pod that is running.\nIt is in the ",(0,i.kt)("inlineCode",{parentName:"p"},"/opt/xebialabs/xl-release-server/default-conf/xl-release.conf.template")," "),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"For example:\n```shell\nkubectl cp digitalai/dai-xlr-digitalai-release-0:/opt/xebialabs/xl-release-server/default-conf/xl-release.conf.template .\n```\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Update the CR file or CR on the cluster"),(0,i.kt)("p",{parentName:"li"},"Use that file to update your CR file under ",(0,i.kt)("inlineCode",{parentName:"p"},"spec.release.configurationManagement.configuration.scriptData")," path. Add there the content of the ",(0,i.kt)("inlineCode",{parentName:"p"},"xl-release.conf.template")," file under the ",(0,i.kt)("inlineCode",{parentName:"p"},"xl-release.conf.template")," key."),(0,i.kt)("p",{parentName:"li"},"Also update the script under the ",(0,i.kt)("inlineCode",{parentName:"p"},"spec.release.configurationManagement.configuration.script")," path. Add there "),(0,i.kt)("p",{parentName:"li"},"For example:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'...\n        script: |-\n          ...\n          cp /opt/xebialabs/xl-release-server/xlr-configuration-management/xl-release.conf.template /opt/xebialabs/xl-release-server/default-conf/xl-release.conf.template && echo "Changing the xl-release.conf.template";\n        scriptData:\n          ...\n          xl-release.conf.template: |-\n            xl {\n              ...\n            }\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If you have oidc enabled, in that case disable it. Because the changes that are from there will conflict with your changes in the ",(0,i.kt)("inlineCode",{parentName:"p"},"xl-release.conf.template")," file."),(0,i.kt)("p",{parentName:"li"},"Just in CR file put ",(0,i.kt)("inlineCode",{parentName:"p"},"spec.oidc.enabled: false"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Sava and apply changes from the CR file."))))}m.isMDXComponent=!0}}]);